<div class="container-fluid">
    <!-- Page-Title -->
    <div class="row">
        <div class="col-sm-12">
            <div class="page-title-box">
                <div class="row ">
                    <div class="d-flex justify-content-between">
                        <h4 class="page-title mb-2"><%= pageTitle %></h4>
                        <ol class="breadcrumb justify-content-end">
                            <li class="breadcrumb-item"><a href="/admin/useri"><%= pageTitle %></a> <i class="mdi mdi-chevron-right"></i></li>
                            <li class="breadcrumb-item active"><%= pageTitle %></li>
                        </ol>
                    </div><!--end col-->
                 
                </div><!--end row-->                                                              
            </div><!--end page-title-box-->
        </div><!--end col-->
    </div><!--end row-->
    <!-- end page title end breadcrumb -->
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between">
                      
                        <h4 class="card-title"><span class="badge bg-soft-success font-12">User List</span></h4>
                        <a class=" btn btn-sm btn-soft-primary" href="/useri/add-useri" role="button"><i class="fas fa-plus me-2"></i>Create User</a>
                    </div>
                </div><!--end card-header-->
  
  <div class="card-body">
    <div>
        <label for="statusFilter">Status:</label>
        <select id="statusFilter">
          <option value="">All</option>
          <option value="1">Active</option>
          <option value="0">Inactive</option>
        </select>
    </div>

    <table id="userTable" class="table table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div><!--end card-body-->
</div><!--end card-->
</div><!--end col-->

</div>

</div><!-- container -->

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
  <script>
    $(document).ready(function() {        
        const userTable = $('#userTable').DataTable({
        processing: true,
        serverSide: true,
        
    //    ajax: '/useri',
        'ajax' : {
            'url' : '/useri/fetch',
            data: function(data) {
            // Add the selected status filter value to the AJAX request
            data.status = $('#statusFilter').val();
            },
            'type': 'GET'
        },
        columns: [
          { data: 'id' },
          { data: 'name' },
          { data: 'email' },
          { data: 'status' },
          { data: 'actions', orderable: false, searchable: false }
         /* {
            data: null,
            render: function(data, type, row) {
                return '<a href="/admin/useri/view/' + row.id + '" class="btn btn-primary">View</a> &nbsp; <a href="/admin/update-user/' + row.id + '" class="btn btn-info">Edit</a>';
              
            },
         },*/
        ] 
      });

      // Handle the status filter change event
        $('#statusFilter').on('change', function() {
            // Refresh the DataTables table when the status filter changes
            userTable.ajax.reload();
        });
    });
  </script>
